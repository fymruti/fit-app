<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fit – All-in-One (v12.2.6)</title>
<meta name="app-version" content="12.2.6"/>
<style>
:root{
  --bg:#f2f2f2; --ink:#0f172a; --ink-soft:#475569;
  --accent:#4A90E2; --accent-dark:#357ABD;
  --card:#e0e0e0; --input:#fafafa; --border:#cbd5e1;
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f172a; --ink:#f1f5f9; --ink-soft:#94a3b8;
    --accent:#60a5fa; --accent-dark:#2563eb;
    --card:#1f2937; --input:#1e293b; --border:#334155;
  }
}
body.dark{
  --bg:#0f172a; --ink:#f1f5f9; --ink-soft:#94a3b8;
  --accent:#60a5fa; --accent-dark:#2563eb;
  --card:#1f2937; --input:#1e293b; --border:#334155;
}
*{box-sizing:border-box}
body{ margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--ink); transition:background .3s,color .3s;}
header{ display:grid; grid-template-columns:1fr auto; gap:10px;
  background:linear-gradient(90deg,var(--accent),var(--accent-dark)); color:#fff; padding:10px; position:sticky; top:0; z-index:10; box-shadow:0 3px 6px rgba(0,0,0,.1);}
.tabs{display:flex; gap:8px; flex-wrap:wrap}
.tabs a{ padding:8px 12px; border:none; border-radius:8px; cursor:pointer; background:#fff; color:#1b3f6b; font-weight:600; box-shadow:0 2px 4px rgba(0,0,0,.15); text-decoration:none}
body.dark .tabs a{background:#1e293b; color:#e2e8f0}
.tabs a[aria-current="page"]{background:#1b3f6b; color:#fff}
body.dark .tabs a[aria-current="page"]{background:#60a5fa; color:#0f172a}
.rightbar{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
.rightbar button{ border:none; border-radius:8px; padding:6px 8px; cursor:pointer; background:#fff; color:#1b3f6b;}
body.dark .rightbar button{background:#334155; color:#f1f5f9}
.btn{background:#fff; color:#1b3f6b; border:1px solid rgba(255,255,255,.4); border-radius:8px; padding:6px 10px; cursor:pointer}
main{max-width:1180px; margin:0 auto; padding:12px}
.card{ background:var(--card); border-radius:12px; padding:12px; box-shadow:0 6px 14px rgba(0,0,0,.08); margin-bottom:12px;}
.small{font-size:12px; color:var(--ink-soft)}
main > section{display:none}
main > section#start{display:block}
main > section:target{display:block}
main:has(section:target:not(#start)) > #start{display:none}
</style>
</head>
<body>
<header>
  <nav class="tabs" id="tabs">
    <a href="#start" data-tab="start" aria-current="page">Start</a>
    <a href="#sylwetka" data-tab="sylwetka">Sylwetka</a>
    <a href="#dieta" data-tab="dieta">Dieta</a>
    <a href="#jedzenie" data-tab="jedzenie">Jedzenie</a>
    <a href="#suple" data-tab="suple">Suple</a>
  </nav>
  <div class="rightbar">
    <button id="btnTheme" class="btn" title="Tryb jasny/ciemny">🌙/☀️</button>
    <button id="btnPickDir" class="btn" title="Wybierz folder FIT (Chromium)">📁 Ustaw folder FIT</button>
    <button id="btnSaveReport" class="btn" title="Zapisz raport TXT">📝 Zapisz raport TXT</button>
    <button id="btnDiag" class="btn" title="Panel diagnostyczny">🧪Diag</button>
  </div>
</header>

<main>
  <section id="start">
    <div class="card">
      <h3>Start</h3>
      <div class="small">
        v12.2.6 — Samowystarczalna wersja (naprawione JS).<br>
        Wszystko działa bez plików zewnętrznych.
      </div>
    </div>
  </section>
  <section id="sylwetka"><div class="card"><h3>Sylwetka</h3><div class="small">Przykład.</div></div></section>
  <section id="dieta"><div class="card"><h3>Dieta</h3><div class="small">Przykład.</div></div></section>
  <section id="jedzenie"><div class="card"><h3>Jedzenie</h3><div class="small">Przykład.</div></div></section>
  <section id="suple"><div class="card"><h3>Suple</h3><div class="small">Przykład.</div></div></section>
</main>

<script>
/* === Mini system stabilności (log + HUD + raport TXT + darkmode) === */
(function(){
  function hud(msg){let d=document.getElementById('hud');if(!d){d=document.createElement('div');d.id='hud';d.style.cssText='position:fixed;left:8px;bottom:8px;padding:6px 10px;background:rgba(0,0,0,.7);color:#fff;border-radius:8px;font:12px system-ui;z-index:9999';document.body.appendChild(d);}d.textContent=msg;d.style.display='block';clearTimeout(d._t);d._t=setTimeout(()=>d.style.display='none',4000);}
  function log(l,m,o){console[l]('[FIT]',m,o||'');hud(m);}
  function now(){return new Date().toISOString().slice(0,19).replace('T',' ');}
  const btnTheme=document.getElementById('btnTheme');
  const pref=localStorage.getItem('fit_theme_v1');
  if(pref==='dark')document.body.classList.add('dark');
  btnTheme.onclick=()=>{const d=!document.body.classList.contains('dark');document.body.classList.toggle('dark',d);localStorage.setItem('fit_theme_v1',d?'dark':'light');hud(d?'🌙 Tryb ciemny':'☀️ Tryb jasny');};
  function paintTabs(){const id=(location.hash||'#start').slice(1);document.querySelectorAll('#tabs a').forEach(a=>a.setAttribute('aria-current',a.dataset.tab===id?'page':'false'));}window.addEventListener('hashchange',paintTabs);paintTabs();
  let dirHandle=null;
  document.getElementById('btnPickDir').onclick=async()=>{try{if(!window.showDirectoryPicker){alert('Twoja przeglądarka nie obsługuje tej funkcji.');return;}dirHandle=await window.showDirectoryPicker({mode:'readwrite'});hud('📁 Folder FIT ustawiony');}catch(e){log('warn','Anulowano wybór folderu',e);}};
  document.getElementById('btnSaveReport').onclick=async()=>{try{const text=`FIT Raport\\nData: ${now()}\\nPrzeglądarka: ${navigator.userAgent}\\nZakładka: ${(location.hash||'#start')}\\nMotyw: ${document.body.classList.contains('dark')?'dark':'light'}`;const fname=`FIT_report_${Date.now()}.txt`;if(dirHandle){const f=await dirHandle.getFileHandle(fname,{create:true});const w=await f.createWritable();await w.write(text);await w.close();hud('💾 Zapisano: '+fname);return;}const blob=new Blob([text],{type:'text/plain'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=fname;a.click();hud('⬇️ Pobrano: '+fname);}catch(e){log('error','Błąd zapisu raportu',e);}};
  document.getElementById('btnDiag').onclick=()=>{alert('Diag: brak błędów krytycznych. Wszystko działa ✅');};
  log('info','FIT v12.2.6 uruchomiono');
})();
</script>
</body>
</html>
