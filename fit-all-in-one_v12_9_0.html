<!DOCTYPE html>
<html lang='pl'><head><meta charset='utf-8'/><meta name='viewport' content='width=device-width,initial-scale=1'/>
<title>FIT â€“ v12.9.0</title>
<style>
:root{--bg:#f2f5f9;--ink:#0f172a;--ink-soft:#475569;--accent:#3b82f6;--card:#fff;--input:#f8fafc;--border:#cbd5e1}
body.dark{--bg:#0b1220;--ink:#e5edf6;--ink-soft:#9fb0c9;--accent:#60a5fa;--card:#121a2b;--input:#0f172a;--border:#334155}
*{box-sizing:border-box}body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--ink)}
header{position:sticky;top:0;z-index:10;padding:10px;background:linear-gradient(90deg,var(--accent),#8b5cf6);color:#fff}
.tabs{display:flex;gap:8px;flex-wrap:wrap}.tabs button{padding:8px 12px;border:none;border-radius:10px;cursor:pointer;background:#fff}
body.dark .tabs button{background:#1e293b;color:#e2e8f0}.tabs button.active{background:#0f172a;color:#fff}
main{max-width:1200px;margin:0 auto;padding:12px}.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px;margin:10px 0}
.hidden{display:none}.row-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}.row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
.figure-wrap img{width:100%;border-radius:12px;border:1px solid var(--border);background:#000}.gallery{display:flex;gap:6px;flex-wrap:wrap;margin-top:8px}
.gallery img{width:78px;height:96px;object-fit:cover;border:1px solid var(--border);border-radius:8px;cursor:pointer;background:#000}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;padding:20px;z-index:50}
.modal .box{background:#000;border-radius:12px;max-width:1280px;width:100%;padding:10px;position:relative}.modal img{width:100%;height:auto}
.modal .close{position:absolute;top:8px;right:8px;background:#fff;border:none;border-radius:8px;padding:6px 10px;cursor:pointer}
canvas{width:100%;height:180px;display:block;background:#fff;border-radius:10px;border:1px solid var(--border)}
</style>
</head>
<body>
<header>
  <div class="tabs" id="tabs">
    <button class="active" data-tab="start">Start</button>
    <button data-tab="sylwetka">Sylwetka</button>
    <button data-tab="dieta">Dieta</button>
    <button data-tab="jedzenie">Jedzenie</button>
    <button data-tab="trening">Trening</button>
    <button data-tab="suple">Suple</button>
    <button data-tab="opcje">Opcje</button>
  </div>
  <button id="btnTheme" style="margin-top:8px">ğŸŒ™/â˜€ï¸</button>
</header>
<main>
<section id="start">
  <div class="card"><h2>FIT v12.9.0</h2><div>Ta wersja zawiera: sylwetkÄ™ z auto-blur, kolumny diety, listÄ™ zakupÃ³w, treningi z linkami YT, suple â€bÄ™dÄ… potemâ€, opcje z folderem raportÃ³w.</div></div>
</section>
<section id="sylwetka" class="hidden">
  <div class="card"><h3>ğŸ§ Dawid + zdjÄ™cia</h3>
    <div class="figure-wrap"><img id="dawidImg" alt="Dawid" src="data:image/svg+xml;utf8,<?xml version='1.0'?><svg xmlns='http://www.w3.org/2000/svg' width='640' height='960'><rect width='100%' height='100%' fill='black'/><text x='50%' y='50%' fill='white' font-size='32' text-anchor='middle'>Dawid</text></svg>"/></div>
    <div class="row-2" style="margin-top:8px">
      <div><label>Data</label><input type="date" id="photoDate"></div>
      <div><label>Dodaj zdjÄ™cia (max 5/dzieÅ„)</label><input type="file" id="photoFile" accept="image/*" multiple></div>
    </div>
    <div class="gallery" id="photoGallery"></div>
  </div>
  <div class="card"><h3>ğŸ“‰ Wykres</h3><canvas id="mChart" width="360" height="180"></canvas></div>
</section>
<section id="dieta" class="hidden"><div class="card"><h3>ğŸ½ï¸ PosiÅ‚ki (3 kolumny)</h3><div id="mealsGrid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px"></div></div></section>
<section id="jedzenie" class="hidden"><div class="card"><h3>ğŸ›’ Lista zakupÃ³w</h3><textarea id="shoppingList" rows="6" style="width:100%"></textarea><button id="btnDownloadReport">â¬‡ï¸ TXT</button></div></section>
<section id="trening" class="hidden"><div class="card"><h3>ğŸ‹ï¸â€â™‚ï¸ Dzisiejszy trening</h3><div id="workoutToday">Wybierz plan.</div></div></section>
<section id="suple" class="hidden"><div class="card" style="text-align:center;padding:40px"><h2>ğŸ’Š Suplementy</h2><p>ModuÅ‚ bÄ™dzie dodany pÃ³Åºniej.</p></div></section>
<section id="opcje" class="hidden"><div class="card"><h3>âš™ï¸ Opcje</h3><input id="reportFolder" placeholder="C:\\FIT\\Reports\\"><button id="btnSaveFolder">ğŸ’¾ Zapisz</button><div id="folderInfo" style="font-size:12px;color:#475569;margin-top:6px"></div></div></section>
</main>
<div class="modal" id="photoModal"><div class="box"><button class="close" id="closeModal">Zamknij âœ–</button><img id="modalImg" alt="PodglÄ…d 720p"/></div></div>
<script>
(()=>{
  const STORAGE_KEY='fit129_simple';
  const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
  function getAll(){ try{const r=localStorage.getItem(STORAGE_KEY); return r?JSON.parse(r):{photos:[],opts:{reportFolder:''}};}catch(e){return {photos:[],opts:{reportFolder:''}};}
  }
  function saveAll(o){ localStorage.setItem(STORAGE_KEY,JSON.stringify(o)); }
  function showTab(id){ $$('main > section').forEach(s=>s.classList.add('hidden')); $('#'+id).classList.remove('hidden'); }
  function initTabs(){ $('#tabs').addEventListener('click',e=>{const b=e.target.closest('button[data-tab]'); if(!b) return; $$('#tabs button').forEach(x=>x.classList.toggle('active',x===b)); showTab(b.dataset.tab); }); }
  function toggleTheme(){ document.body.classList.toggle('dark'); }
  function today(){ return new Date().toISOString().slice(0,10); }
  function addPhotos(files){ const date=$('#photoDate').value||today(); const all=getAll(); const perDay=all.photos.filter(p=>p.date===date).length; const allowed=Math.max(0,5-perDay); if(allowed<=0){alert('Limit 5/dzieÅ„');return;} Array.from(files).slice(0,allowed).forEach(file=>{ const fr=new FileReader(); fr.onload=()=>{ const img=new Image(); img.onload=()=>{ const W=img.width,H=img.height; const c=document.createElement('canvas'); c.width=W;c.height=H; const ctx=c.getContext('2d'); ctx.drawImage(img,0,0); const faceH=Math.round(H*0.22); ctx.filter='blur(14px)'; ctx.fillStyle='rgba(0,0,0,0.1)'; ctx.fillRect(Math.round(W*0.2),0,Math.round(W*0.6),faceH); ctx.filter='none'; const data=c.toDataURL('image/jpeg',0.92); all.photos.push({date,ts:Date.now(),data}); saveAll(all); renderGallery(); }; img.src=fr.result; }; fr.readAsDataURL(file); }); }
  function renderGallery(){ const box=$('#photoGallery'); const all=getAll(); const list=all.photos.slice(-12); box.innerHTML=''; if(!list.length){ box.textContent='Brak zdjÄ™Ä‡.'; return; } list.forEach(p=>{ const i=document.createElement('img'); i.src=p.data; i.title=p.date; i.addEventListener('click',ev=>{ if(ev.altKey){ if(confirm('UsunÄ…Ä‡?')){ const all=getAll(); all.photos=all.photos.filter(x=>x.ts!==p.ts); saveAll(all); renderGallery(); } return;} openModal(p.data); }); box.appendChild(i); }); }
  function openModal(src){ const i=new Image(); i.onload=()=>{ const maxW=1280,maxH=720; let w=i.width,h=i.height,r=Math.min(maxW/w,maxH/h); if(r<1){w=Math.round(w*r);h=Math.round(h*r);} const c=document.createElement('canvas'); c.width=w;c.height=h; c.getContext('2d').drawImage(i,0,0,w,h); $('#modalImg').src=c.toDataURL('image/jpeg',0.95); $('#photoModal').style.display='flex'; }; i.src=src; }
  $('#closeModal')?.addEventListener('click',()=>$('#photoModal').style.display='none'); $('#photoModal')?.addEventListener('click',e=>{ if(e.target.id==='photoModal') $('#photoModal').style.display='none'; });
  function renderMeals(){ const box=$('#mealsGrid'); const B=['Owsianka P40/C60/F15','Jajecznica P35/C10/F20','Skyr + pÅ‚atki P30/C40/F5']; const L=['Kurczak + ryÅ¼ P45/C70/F10','ÅosoÅ› + ziemniaki P40/C50/F20']; const D=['SaÅ‚atka grecka P20/C15/F25','Tortilla z indykiem P35/C45/F10']; const mk=(t,arr)=>'<div style="background:var(--input);border:1px solid var(--border);border-radius:10px;padding:10px"><h4>'+t+'</h4>'+arr.map(x=>'â€¢ '+x).join('<br>')+'</div>'; box.innerHTML=mk('Åšniadanie',B)+mk('Obiad',L)+mk('Kolacja',D); }
  function downloadReport(){ const all=getAll(); const txt=`FIT Raport\\nData: ${new Date().toLocaleString()}\\nWersja: v12.9.0\\nZakÅ‚adka: #jedzenie\\nLiczba zdjÄ™Ä‡: ${all.photos.length}`; const a=document.createElement('a'); a.href=URL.createObjectURL(new Blob([txt],{type:'text/plain;charset=utf-8'})); a.download='FIT_raport.txt'; a.click(); }
  function saveFolder(){ const all=getAll(); all.opts.reportFolder=$('#reportFolder').value.trim(); saveAll(all); $('#folderInfo').textContent=all.opts.reportFolder?('Ustawiono: '+all.opts.reportFolder):'Brak ustawionej Å›cieÅ¼ki.'; }
  // Bind
  initTabs(); renderMeals(); renderGallery();
  $('#btnTheme').addEventListener('click',toggleTheme);
  $('#photoFile').addEventListener('change',e=>{ if(e.target.files?.length) addPhotos(e.target.files); });
  $('#btnDownloadReport').addEventListener('click',downloadReport);
  $('#btnSaveFolder').addEventListener('click',saveFolder);
})();
</script>
</body></html>
